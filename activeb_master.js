// Generated by CoffeeScript 1.7.1
(function() {
  var getSession, getSubject, _;

  _ = Psy._;

  this.Active_Brain = {};

  getSession = function() {
    return $.getJSON("/session");
  };

  getSubject = function() {
    return $.getJSON("/subject");
  };

  Active_Brain.teststart = (function(_this) {
    return function() {
      window.taskSet = [AST, ArrowFlanker, TrailsB, RAT];
      return Start.start(1, 1).then(function() {
        return taskSet[0].start(1, 1);
      }).then(function() {
        return taskSet[1].start(1, 1);
      }).then(function() {
        return taskSet[2].start(1, 1);
      }).then(function() {
        return taskSet[3].start(1, 1);
      }).then(function() {
        return Done.start(1, 1);
      });
    };
  })(this);

  Active_Brain.start = (function(_this) {
    return function() {
      window.taskSet = _.shuffle([AST, ArrowFlanker, TrailsB, RAT]);
      return getSession().then(function(session) {
        window._session = Number(session.data.ID);
        return getSubject();
      }).then(function(subject) {
        window._subject = subject.data.ID;
        return Start.start(window._session, window._subject).then(function() {
          return taskSet[0].start(window._session, window._subject);
        }).then(function() {
          return taskSet[1].start(window._session, window._subject);
        }).then(function() {
          return taskSet[2].start(window._session, window._subject);
        }).then(function() {
          return taskSet[3].start(window._session, window._subject);
        }).then(function() {
          return Done.start.start(window._session, window._subject);
        });
      });
    };
  })(this);

}).call(this);
